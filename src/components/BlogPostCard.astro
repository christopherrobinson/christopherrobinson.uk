---
import type { ImageMetadata } from 'astro';
import { Picture } from 'astro:assets';
import { Icon } from 'astro-icon/components';
import FormattedDate from '@/components/Helpers/FormattedDate.astro';

export interface Props {
  cover?: ImageMetadata;
  date: Date;
  excerpt: string;
  minutesRead: number;
  slug: string;
  title: string;
}

const { cover, date, excerpt, minutesRead, slug, title } = Astro.props;
---

<a
  class="bg-white  border  border-zinc-200  flex  flex-col  group  h-full  overflow-hidden  rounded-md  transition  hover:border-primary-700"
  href={`/blog/${slug}/`}
>
  {(cover) && (
    <div class="aspect-video  relative">
      <Picture
        alt={title}
        class="aspect-video  object-cover  shrink-0  w-full"
        densities={[2]}
        formats={['avif', 'webp']}
        src={cover}
        width={360}
      />
      <div class="absolute  backdrop-blur  bg-zinc-950/30  flex  items-center  inset-0  justify-center  opacity-0  text-white  transition  group-focus:opacity-100  group-hover:opacity-100">
        <Icon class="size-8" name="arrow-right-from-bracket" />
      </div>
    </div>
  )}
  <div class="flex  flex-col  h-full  p-5  space-y-4">
    <h2 class="font-light  text-xl  transition  group-focus:text-primary-700  group-hover:text-primary-700">{title}</h2>
    <p class="grow">{excerpt}</p>
    <ul class="flex  flex-wrap  font-light  justify-between  mt-auto  pt-1  text-xs  text-zinc-600">
      <li class="flex  items-start">
        <span class="flex  items-center  justify-center  h-4  mr-1  w-4">
          <Icon class="text-zinc-600  h-3" name="calendar-day" />
        </span>
        <FormattedDate date={date} />
      </li>
      <li class="flex  items-start">
        <span class="flex  items-center  justify-center  h-4  mr-1  w-4">
          <Icon class="text-zinc-600  h-3" name="stopwatch" />
        </span>
        <span>{minutesRead} read</span>
      </li>
    </ul>
  </div>
</a>
