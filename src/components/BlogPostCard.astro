---
import type { ImageMetadata } from 'astro';
import { Picture } from 'astro:assets';
import FormattedDate from '@/components/Helpers/FormattedDate.astro';

export interface Props {
  cover?: ImageMetadata;
  date: Date;
  excerpt: string;
  minutesRead: number;
  slug: string;
  title: string;
}

const { cover, date, excerpt, minutesRead, slug, title } = Astro.props;
---

<a
  class="bg-white  border  border-zinc-200  flex  flex-col  group  h-full  overflow-hidden  rounded-md  transition  hover:border-primary-700"
  href={`/blog/${slug}/`}
>
  {(cover) && (
    <div class="aspect-video  relative">
      <Picture
        alt={title}
        class="aspect-video  object-cover  shrink-0  w-full"
        densities={[2]}
        formats={['avif', 'webp']}
        src={cover}
        width={360}
      />
      <div class="absolute  backdrop-blur  bg-zinc-950/30  flex  items-center  inset-0  justify-center  opacity-0  text-white  transition  group-focus:opacity-100  group-hover:opacity-100">
        <svg
          class="size-8"
          viewBox="0 0 512 512"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M507.3 267.3c6.2-6.2 6.2-16.4 0-22.6l-128-128c-6.2-6.2-16.4-6.2-22.6 0s-6.2 16.4 0 22.6L457.4 240 176 240c-8.8 0-16 7.2-16 16s7.2 16 16 16l281.4 0L356.7 372.7c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0l128-128zM176 64c8.8 0 16-7.2 16-16s-7.2-16-16-16L80 32C35.8 32 0 67.8 0 112L0 400c0 44.2 35.8 80 80 80l96 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-96 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48l96 0z"
            fill="currentColor"
          />
        </svg>
      </div>
    </div>
  )}
  <div class="flex  flex-col  h-full  p-5  space-y-4">
    <h2 class="font-light  text-xl  transition  group-focus:text-primary-700  group-hover:text-primary-700">{title}</h2>
    <p class="grow">{excerpt}</p>
    <ul class="flex  flex-wrap  font-light  justify-between  mt-auto  pt-1  text-xs  text-zinc-600">
      <li class="flex  items-start">
        <span class="flex  items-center  justify-center  h-4  mr-1  w-4">
          <svg
            class="h-3"
            viewBox="0 0 448 512"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M128 16c0-8.8-7.2-16-16-16s-16 7.2-16 16V64H64C28.7 64 0 92.7 0 128v32 32V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V192 160 128c0-35.3-28.7-64-64-64H352V16c0-8.8-7.2-16-16-16s-16 7.2-16 16V64H128V16zM32 192H416V448c0 17.7-14.3 32-32 32H64c-17.7 0-32-14.3-32-32V192zM64 96H384c17.7 0 32 14.3 32 32v32H32V128c0-17.7 14.3-32 32-32zm40 160h80c4.4 0 8 3.6 8 8v80c0 4.4-3.6 8-8 8H104c-4.4 0-8-3.6-8-8V264c0-4.4 3.6-8 8-8zm-40 8v80c0 22.1 17.9 40 40 40h80c22.1 0 40-17.9 40-40V264c0-22.1-17.9-40-40-40H104c-22.1 0-40 17.9-40 40z"
              fill="currentcolor"></path>
          </svg>
        </span>
        <FormattedDate date={date} />
      </li>
      <li class="flex  items-start">
        <span class="flex  items-center  justify-center  h-4  mr-1  w-4">
          <svg
            class="h-3"
            viewBox="0 0 448 512"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M128 16c0-8.8 7.2-16 16-16H304c8.8 0 16 7.2 16 16s-7.2 16-16 16H240V96.6c49.4 3.8 94 24.8 127.7 57l37-37c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6l-38.2 38.2C416 212.6 432 256.4 432 304c0 114.9-93.1 208-208 208S16 418.9 16 304c0-109.5 84.6-199.2 192-207.4V32H144c-8.8 0-16-7.2-16-16zM48 304a176 176 0 1 0 352 0A176 176 0 1 0 48 304zm192-96V320c0 8.8-7.2 16-16 16s-16-7.2-16-16V208c0-8.8 7.2-16 16-16s16 7.2 16 16z"
              fill="currentcolor"
            />
          </svg>
        </span>
        <span>{minutesRead} read</span>
      </li>
    </ul>
  </div>
</a>
