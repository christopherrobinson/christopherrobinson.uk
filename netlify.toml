[build]
  environment = { NODE_VERSION = "22" }
  base = "/"
  command = "pnpm run build"
  publish = "dist"

[[headers]]
  for = "/*"
  [headers.values]
    Feature-Policy = "accelerometer 'none' -light-sensor 'none'; autoplay 'none'; battery 'none'; camera 'none'; display-capture 'none'; document-domain 'none'; encrypted-media 'none'; fullscreen 'none'; geolocation 'none'; gyroscope 'none'; layout-animations 'none'; legacy-image-formats 'none'; magnetometer 'none'; microphone 'none'; midi 'none'; oversized-images 'none'; payment 'none'; picture-in-picture 'none'; publickey-credentials-get 'none'; screen-wake-lock 'none'; sync-xhr 'none'; unoptimized-images 'none'; unsized-media 'none'; usb 'none'; vibrate 'none'; vr 'none'; wake-lock 'none'; xr 'none'; xr-spatial-tracking 'none;"
    Referrer-Policy = "same-origin"
    Strict-Transport-Security = "max-age=31536000"
    X-Content-Type-Options = "nosniff"
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"

[[redirects]]
  from = "/api/mpg/:vehicle.png"
  to = "/api/mpg/:vehicle/"
  status = 200
  force = true
